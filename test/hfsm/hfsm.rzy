//test ok

component
  Hfsm
    slot   tick();
    signal evt( value: R{0,255} );

  implementation hfsm(A)
    transition 
      AA to B.BB by tick() do
        evt( 1 );
      end
      AA.BB to B by tick() do
        evt( 2 );
      end
    
    state A(AA)
      entry
        evt( 10 );
      end
      exit
        evt( 19 );
      end
      
      state AA(AAA)
        entry
          evt( 20 );
        end
        exit
          evt( 29 );
        end
        
        state AAA
          entry
            evt( 30 );
          end
          exit
            evt( 39 );
          end
        end
        
        transition 
          AA to BB by tick() do
            evt( 3 );
          end
    
        state BB
          entry
            evt( 40 );
          end
          exit
            evt( 49 );
          end
        end
      end
    end

    state B(BB)
      entry
        evt( 50 );
      end
      exit
        evt( 59 );
      end

      state BB(BBB)
        entry
          evt( 60 );
        end
        exit
          evt( 69 );
        end
        
        state BBB
          entry
            evt( 70 );
          end
          exit
            evt( 79 );
          end
        end
      end
    end
    
    transition 
      BBB to AAA by tick() do
        evt( 3 );
      end
  end

