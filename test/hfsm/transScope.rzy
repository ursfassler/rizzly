
interface
  Iface
    function tick();
  end
  
component
  TransScope
    input
      in : Iface;
      
    output
      outA  : Iface;
      outB  : Iface;
    
  implementation hfsm( A )
    var
      a : R{0,0};     // this variable is never read since A.a and B.b shadows it
      
    entry
      a := 0;
    end
  
    transition
      A to B by in.tick() if a = 0;   // guard is evaluated in the scope of the source state
      B to A by in.tick() if a = 0;
  
    state A
      var
        a : R{0,4};
        
      entry
        a := 4;
        outA.tick();
      end
      
      transition
        A to A by in.tick() if a > 0 do
          a := a - 1;
        end
    end
      
    state B
      entry
        a := 2;
        outB.tick();
      end
      
      var
        a : R{0,2};
        
      transition
        B to B by in.tick() if a > 0 do
          a := a - 1;
        end
    end

  end

